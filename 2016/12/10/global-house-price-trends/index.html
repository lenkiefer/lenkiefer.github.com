<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.81.0" />

  <title>Global house price trends  &middot; Len Kiefer</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="/css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

 
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/androidstudio.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="http://lenkiefer.com/img/favicon.PNG" type="image/x-icon" />

  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="/">Len Kiefer</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/post/"><i class='fa fa-list fa-fw'></i>Archive</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/about/"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/@lenkiefer" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/leonard-kiefer-51175331" target="_blank"><i class="fa fa-linkedin-square fa-fw"></i>LinkedIn</a>
    </li>
    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/lenkiefer" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2015-2018. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


       <meta name="twitter:card" content="summary">
       <meta name="twitter:image" content="http://lenkiefer.com/img/logo/logo.png" >
    
    <meta property="og:title" content="Global house price trends ">
    <meta property="og:description" content="R statistics forecasting house prices housing">

<div class="header">
  <h1>Global house price trends </h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>2016/12/10</time>
  </div>

  

  

  

</div>

  


<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>THE GREAT THING ABOUT SOCIAL MEDIA is that it helps put me in contact with people from around the world. I started up a conversation with Twitter user <span class="citation">@benmyers29</span> who shared some recent trends in Canadian housing markets.</p>
<blockquote class="twitter-tweet" data-lang="en">
<p lang="en" dir="ltr">
89% of Canadians have more than 25% equity in their homes. Avg equity ratio is 74%. Nearly 40% of Canadians have their homes fully paid off. <a href="https://t.co/mAfkO38Kg2">pic.twitter.com/mAfkO38Kg2</a>
</p>
— Big Ben Myers (<span class="citation">@benmyers29</span>) <a href="https://twitter.com/benmyers29/status/806956597155131393">December 8, 2016</a>
</blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
<p><span class="citation">@benmyers29</span> pointed out that homeowner equity in Canada was quite high, with only about 1% of Canadian mortgaged residential properties underwater (where the mortgage amount is greater than the property value so homeowner equity is negative) per <a href="http://www.mortgageproscan.ca/en/site/doc/40632">this report</a> referenced in the tweet. This was in contrast to a <a href="http://www.corelogic.com/blog/authors/molly-boesel/2016/12/borrower-equity-update-third-quarter-2016.aspx#.WEwsyfkrIfl">recent report from CoreLogic</a> that estimates more than 6 percent of U.S. mortgaged residential properties were underwater.</p>
<p>Of course, the primary driver of this is going to be house prices, so I thought it would be helpful to look at some trends in international house prices. In this post I’ll share some charts I made (along with <a href="https://www.r-project.org/">R</a> code) to help visualize the trends.</p>
<div id="get-data-on-house-prices" class="section level2">
<h2>Get data on house prices</h2>
<p>First we’re going to need to gather some data on house prices. Fortunately, the <a href="http://www.dallasfed.org/index.cfm">Dallas Federal Reserve Bank</a> has compiled statistics on <a href="http://www.dallasfed.org/institute/houseprice/">international house price trends</a>. Fed researchers have gone through the hard work of collecting data for many countries and harmonizing the series so they are more easily comparable. Read about their hard work and the details <a href="http://www.dallasfed.org/assets/documents/institute/wpapers/2011/0099.pdf">here.</a></p>
<p>The data are available in a convenient spreadsheet (<a href="http://www.dallasfed.org/assets/documents/institute/houseprice/hp1602.xlsx">2016Q2 data</a>), and they even posted some R code to import it.</p>
</div>
</div>
<div id="comparing-house-price-trends" class="section level1">
<h1>Comparing house price trends</h1>
<p>First, let’s just look at nominal house price trends by country. “Aggregate” is a purchase-power parity GDP weighted composition of the countries in the series. Let’s take a look:</p>
<p><img src="/post/2016-12-10-global-house-price-trends_files/figure-html/fig-global-viz1-12-10-2016-1.png" width="672" /></p>
<p>A lot going on… let’s just compare Canada to the US:</p>
<p><img src="/post/2016-12-10-global-house-price-trends_files/figure-html/fig-global-viz2-12-10-2016-1.png" width="672" /></p>
<p>Here we can see that since 2005, US prices are only up slightly, while Canadian prices are almost double (index value of 2000). That alone goes a long way to explaining why so many more Americans are underwater relative to Canadians. In fact, given the Canadian house price path, I bet the 1% figure is rounded up.</p>
</div>
<div id="trends-in-real-prices" class="section level1">
<h1>Trends in real prices</h1>
<p>Comparing nominal price trends can be misleading if inflation differs significantly across countries. Because mortgage debt is typically not inflation-adjusted, comparing nominal prices is appropriate for thinking about negative equity. But how about if we wanted to know how house prices are evolving relative to other goods (something I’ve <a href="../../../../2016/11/30/hpi-gif">written about for the U.S. recently</a>)?</p>
<p>Fortunately the Dallas Fed has included both a real (inflation-adjusted) house price series for each country along with estimates of personal disposable income. Let’s examine trends in these variables. First, let’s recreate the panel plot for real house price trends:</p>
<p><img src="/post/2016-12-10-global-house-price-trends_files/figure-html/fig-global-viz3-12-10-2016-1.png" width="672" /></p>
<p>We can see quite a bit of differences across countries. Trends in the log-level of the index might not be the best way to visualize these data. Let’s instead look at 3-year percent changes in real house prices by country:</p>
<p><img src="/post/2016-12-10-global-house-price-trends_files/figure-html/fig-global-viz4-12-10-2016-1.png" width="672" /></p>
<p>Now I think we can better see what’s going on across the globe. Many countries saw real house prices decline during the Great Recession, but not all are recovering the same. Let’s try an alternative visualization that lets us see more history.</p>
<p><img src="/post/2016-12-10-global-house-price-trends_files/figure-html/fig-global-viz5-12-10-2016-1.png" width="672" /></p>
<p>This chart and the panel line chart above tells several stories. S. Korea hit hard by late 90s financial crisis, Japan slows in 90s, US mostly positive until 2007, Germany stable, Australia, and New Zealand not as much.</p>
</div>
<div id="affordability" class="section level1">
<h1>Affordability</h1>
<p>Real house price trends don’t tell us bout affordability, whether or not average households can afford to buy homes. We also need to take into account incomes and interest rates. Fortunately the Dallas Fed database gives us estimates of disposable income. Unfortunately it doesn’t provide mortgage interest rates. Complicating things further, <a href="https://cbaweb.sdsu.edu/assets/files/research/Lea/10122_Research_RIHA_Lea_Report.pdf">typical mortgage terms differ quite a bit by country.</a></p>
<p>Nevertheless, we can get some idea about how housing markets are evolving relative to the rest of the economy by comparing house prices to income.</p>
<p><img src="/post/2016-12-10-global-house-price-trends_files/figure-html/fig-global-viz6-12-10-2016-1.png" width="672" /></p>
<p>Here we see that since 2005, house prices have outstripped personal income growth in Canada, while the opposite is true for the U.S. Because 2005 is so close to the peak of the U.S. housing cycle, it might make sense to re-index the variables. Here we re-index the data so that 1990 Q1 is equal to 100:</p>
<p><img src="/post/2016-12-10-global-house-price-trends_files/figure-html/fig-global-viz7-12-10-2016-1.png" width="672" /></p>
<p>Now we can create a small multiple for each country in the database:</p>
<p><img src="/post/2016-12-10-global-house-price-trends_files/figure-html/fig-global-viz8-12-10-2016-1.png" width="672" /></p>
<p>If we normalize the price-to-income ratio to be 100 at 1990 we can see how the ratio has evolved (how much space between the two lines).</p>
<p><img src="/post/2016-12-10-global-house-price-trends_files/figure-html/fig-global-viz9-12-10-2016-1.png" width="672" /></p>
<p>And a strip chart:</p>
<p><img src="/post/2016-12-10-global-house-price-trends_files/figure-html/fig-global-viz10-12-10-2016-1.png" width="672" /></p>
</div>
<div id="wrapping-up" class="section level1">
<h1>Wrapping up</h1>
<p>I’ve looked at trends in U.S. house prices <a href="../../../../2016/05/08/visual-meditations-on-house-prices">see my series</a>, but haven’t studied international trends as closely. In this post we took a look at some general trends in key housing market indicators from around the world. Let me leave you–for now–with this animated gif:</p>
<p><img src="{{ site.url }}/img/charts_dec_10_2016/hpi compare international.gif" alt="global hpi gif"/></p>
</div>
<div id="code-for-plots" class="section level1">
<h1>Code for plots</h1>
<p>R code for the plots in this article can be found below. I had to do some adjustments to the Dallas Fed spreadsheet to play nice. I deleted comments from the worksheets, removed the spacer row between country names and the first data rows, and I added a date column.</p>
<pre class="r"><code>#load packages
library(data.table)
library(viridis)
library(tidyverse)
library(lubridate)

#load data files

hpi &lt;- read_excel(&quot;data/dallas fed hp1602b.xlsx&quot;,sheet=&quot;HPI&quot;)
hpi$date&lt;-as.Date(hpi$date, format=&quot;%m/%d/%Y&quot;)

rhpi &lt;- read_excel(&quot;data/dallas fed hp1602b.xlsx&quot;,sheet=&quot;RHPI&quot;)
rhpi$date&lt;-as.Date(rhpi$date, format=&quot;%m/%d/%Y&quot;)

pdi &lt;- read_excel(&quot;data/dallas fed hp1602b.xlsx&quot;,sheet=&quot;PDI&quot;)
pdi$date&lt;-as.Date(pdi$date, format=&quot;%m/%d/%Y&quot;)

rpdi &lt;- read_excel(&quot;data/dallas fed hp1602b.xlsx&quot;,sheet=&quot;RPDI&quot;)
rpdi$date&lt;-as.Date(rpdi$date, format=&quot;%m/%d/%Y&quot;)

# tidy data with gather()
pdi %&gt;% gather(key=country,value=dpi ,-c(date,cycle)) %&gt;% data.table()-&gt;pdi.dt
rpdi %&gt;% gather(key=country,value=rpdi ,-c(date,cycle)) %&gt;% data.table()-&gt;rpdi.dt
hpi  %&gt;% gather(key=country,value=hpi ,-c(date,cycle)) %&gt;% data.table()-&gt;hpi.dt
rhpi  %&gt;% gather(key=country,value=rhpi ,-c(date,cycle)) %&gt;% data.table()-&gt;rhpi.dt

# 1: panel plot

ggplot(data=hpi.dt[year(date)&gt;2004 &amp; 
                      !(country %in% c(&quot;Aggregate2&quot;))],
       aes(x=date,y=hpi,color=country,label=country))+
  geom_line(size=1.1)+
  scale_x_date(breaks=seq(dlist[121],dlist[166]+years(1),&quot;2 year&quot;),
               date_labels=&quot;%y&quot;,limits=c(dlist[121],dlist[166]+years(1)))+
  facet_wrap(~country)+
  theme_minimal()+ geom_hline(yintercept=100,linetype=2)+
  scale_y_log10(breaks=seq(75,200,25),limits=c(60,225))+ theme_fivethirtyeight()+
  theme(legend.position=&quot;none&quot;,plot.caption=element_text(hjust=0,size=7),plot.subtitle=element_text(face=&quot;italic&quot;),
        axis.text=element_text(size=7.5))+
  labs(x=&quot;&quot;,y=&quot;&quot;,title=&quot;Comparing house prices&quot;,
       caption=&quot;\n@lenkiefer Source: Dallas Federal Reserve International House Price Database: http://www.dallasfed.org/institute/houseprice/&quot;,
       subtitle=&quot;Seasonally adjusted index (2005=100, log scale)&quot;)

# 2: compare just Canada and US

ggplot(data=hpi.dt[year(date)&gt;2004 &amp; 
                      (country %in% c(&quot;Canada&quot;,&quot;US&quot;))],
       aes(x=date,y=hpi,color=country,label=country,linetype=country))+
  geom_line(size=1.1)+
  scale_x_date(breaks=seq(dlist[121],dlist[166]+years(1),&quot;2 year&quot;),
               date_labels=&quot;%y&quot;,limits=c(dlist[121],dlist[166]+years(1)))+
 geom_text(data=hpi.dt[date==dlist[i] &amp;
                            country %in% c(&quot;US&quot;,&quot;Canada&quot;)],
              hjust=0,nudge_x=30)+
  theme_minimal()+ geom_hline(yintercept=100,linetype=2)+
  scale_y_log10(breaks=seq(75,200,25),limits=c(60,225))+ theme_fivethirtyeight()+
  theme(legend.position=&quot;none&quot;,plot.caption=element_text(hjust=0,size=7),plot.subtitle=element_text(face=&quot;italic&quot;),
        axis.text=element_text(size=7.5))+
  labs(x=&quot;&quot;,y=&quot;&quot;,title=&quot;Comparing house prices&quot;,
       caption=&quot;\n@lenkiefer Source: Dallas Federal Reserve International House Price Database: http://www.dallasfed.org/institute/houseprice/&quot;,
       subtitle=&quot;Seasonally adjusted index (2005=100, log scale)&quot;)

# 3: panel plot

ggplot(data=rhpi.dt[year(date)&gt;2004 &amp; 
                      !(country %in% c(&quot;Aggregate2&quot;))],
       aes(x=date,y=rhpi,color=country,label=country))+
  geom_line(size=1.1)+
  scale_x_date(breaks=seq(dlist[121],dlist[166]+years(1),&quot;2 year&quot;),
               date_labels=&quot;%y&quot;,limits=c(dlist[121],dlist[166]+years(1)))+
  facet_wrap(~country)+
  theme_minimal()+ geom_hline(yintercept=100,linetype=2)+
  scale_y_log10(breaks=seq(75,200,25),limits=c(60,225))+ theme_fivethirtyeight()+
  theme(legend.position=&quot;none&quot;,plot.caption=element_text(hjust=0,size=7),plot.subtitle=element_text(face=&quot;italic&quot;),
        axis.text=element_text(size=7.5))+
  labs(x=&quot;&quot;,y=&quot;&quot;,title=&quot;Comparing real house prices&quot;,
       caption=&quot;\n@lenkiefer Source: Dallas Federal Reserve International House Price Database: http://www.dallasfed.org/institute/houseprice/&quot;,
       subtitle=&quot;Seasonally adjusted index (2005=100, log scale)&quot;)


#compute 3 year (12-quarter) percent changes
rhpi.dt[,rhpa3:=(rhpi-shift(rhpi,12))/shift(rhpi,12),by=country]

# 4: real house price growth panel

ggplot(data=rhpi.dt[year(date)&gt;2004 &amp; 
                      !(country %in% c(&quot;Aggregate2&quot;))],
       aes(x=date,y=rhpa3,color=country,label=country))+
  geom_line(size=1.1)+
  scale_x_date(breaks=seq(dlist[121],dlist[166]+years(1),&quot;2 year&quot;),
               date_labels=&quot;%y&quot;,limits=c(dlist[121],dlist[166]+years(1)))+
  facet_wrap(~country)+
  geom_hline(yintercept=0,linetype=2)+
  scale_y_continuous(labels=percent)+ 
  theme_fivethirtyeight()+
  theme(legend.position=&quot;none&quot;,plot.caption=element_text(hjust=0,size=7),plot.subtitle=element_text(face=&quot;italic&quot;),
        axis.text=element_text(size=7.5))+
  labs(x=&quot;&quot;,y=&quot;&quot;,title=&quot;Real house price growth&quot;,
       caption=&quot;\n@lenkiefer Source: Dallas Federal Reserve International House Price Database: http://www.dallasfed.org/institute/houseprice/&quot;,
       subtitle=&quot;Percent change over 3 years in seasonally adjusted real index&quot;)

# 5: real hpa strip

ggplot(data=rhpi.dt[year(date)&gt;2004 &amp; 
                      !(country %in% c(&quot;Aggregate2&quot;))],
       aes(x=date,y=rhpa3,color=country,label=country))+
  geom_line(size=1.1)+
  scale_x_date(breaks=seq(dlist[121],dlist[166]+years(1),&quot;2 year&quot;),
               date_labels=&quot;%y&quot;,limits=c(dlist[121],dlist[166]+years(1)))+
  facet_wrap(~country)+
  geom_hline(yintercept=0,linetype=2)+
  scale_y_continuous(labels=percent)+ 
  theme_fivethirtyeight()+
  theme(legend.position=&quot;none&quot;,plot.caption=element_text(hjust=0,size=7),plot.subtitle=element_text(face=&quot;italic&quot;),
        axis.text=element_text(size=7.5))+
  labs(x=&quot;&quot;,y=&quot;&quot;,title=&quot;Real house price growth&quot;,
       caption=&quot;\n@lenkiefer Source: Dallas Federal Reserve International House Price Database: http://www.dallasfed.org/institute/houseprice/&quot;,
       subtitle=&quot;Percent change over 3 years in seasonally adjusted real index&quot;)

# 6:  Canada vs US real hpi and real income 1

ggplot(data=rhpi.dt[year(date)&gt;2004 &amp; 
                      (country %in% c(&quot;US&quot;,&quot;Canada&quot;))],
       aes(x=date,y=rhpi,color=country,label=country))+
  geom_line(size=1.1,color=fivethirtyeight_pal()(2)[1])+
  scale_x_date(breaks=seq(dlist[121],dlist[166]+years(1),&quot;2 year&quot;),
               date_labels=&quot;%y&quot;,limits=c(dlist[121],dlist[166]+years(1)))+
  facet_wrap(~country)+
  geom_line(size=1.1,linetype=2,color=fivethirtyeight_pal()(2)[2],
            data=rpdi.dt[year(date)&gt;2004 &amp;
                                      (country %in% c(&quot;US&quot;,&quot;Canada&quot;))],aes(y=rpdi))  +
  geom_text(data=rhpi.dt[date==max(rhpi.dt$date,na.rm=T) &amp; country %in% c(&quot;US&quot;,&quot;Canada&quot;)],
              hjust=1,nudge_x=-30,label=&quot;House Price&quot;,
              color=fivethirtyeight_pal()(2)[1],fontface=&quot;bold&quot;)+
  geom_text(data=rpdi.dt[date==max(rpdi.dt$date,na.rm=T) &amp;
                           country %in% c(&quot;US&quot;,&quot;Canada&quot;)],
            hjust=1,nudge_x=-30,nudge_y=.01,label=&quot;Income&quot;,aes(y=rpdi),
            color=fivethirtyeight_pal()(2)[2],fontface=&quot;bold&quot;)+
  geom_hline(yintercept=100,linetype=2)+
  scale_y_log10(breaks=seq(75,200,25),limits=c(60,225))+ theme_fivethirtyeight()+
  theme(legend.position=&quot;none&quot;,plot.caption=element_text(hjust=0,size=7),plot.subtitle=element_text(face=&quot;italic&quot;),
        axis.text=element_text(size=7.5))+
  labs(x=&quot;&quot;,y=&quot;&quot;,title=&quot;Real house prices and disposable incomes&quot;,
       caption=&quot;\n@lenkiefer Source: Dallas Federal Reserve International House Price Database: http://www.dallasfed.org/institute/houseprice/&quot;,
       subtitle=&quot;Seasonally adjusted index (2005=100, log scale)&quot;)

# 7:  Canada vs US real hpi and real income 2

# re-index data so 1990Q1 = 1, first append 1990 values:
rhpi.dt[, rhpi.90:=sum(ifelse(date==as.Date(&quot;1990-03-01&quot;),rhpi,0),na.rm=T),by=country]
rpdi.dt[, rpdi.90:=sum(ifelse(date==as.Date(&quot;1990-03-01&quot;),rpdi,0),na.rm=T),by=country]

ggplot(data=rhpi.dt[year(date)&gt;1989 &amp; 
                      (country %in% c(&quot;US&quot;,&quot;Canada&quot;))],
       aes(x=date,y=100*rhpi/rhpi.90,color=country,label=country))+
  geom_line(size=1.1,color=fivethirtyeight_pal()(2)[1])+
  scale_x_date(date_breaks=&quot;5 year&quot;, date_labels=&quot;%y&quot;)+
  facet_wrap(~country)+
  geom_line(size=1.1,linetype=2,color=fivethirtyeight_pal()(2)[2],
            data=rpdi.dt[year(date)&gt;1989 &amp;
                                      (country %in% c(&quot;US&quot;,&quot;Canada&quot;))],aes(y=100*rpdi/rpdi.90))  +
  geom_text(data=rhpi.dt[date==max(rhpi.dt$date,na.rm=T) &amp; country %in% c(&quot;Canada&quot;)],
              hjust=1,nudge_x=-30,label=&quot;House Price&quot;,
              color=fivethirtyeight_pal()(2)[1],fontface=&quot;bold&quot;)+
  geom_text(data=rpdi.dt[date==max(rpdi.dt$date,na.rm=T) &amp;
                           country %in% c(&quot;Canada&quot;)],
            hjust=1,nudge_x=-30,nudge_y=-20,label=&quot;Income&quot;,aes(y=rpdi*100/rpdi.90),
            color=fivethirtyeight_pal()(2)[2],fontface=&quot;bold&quot;)+
  geom_hline(yintercept=100,linetype=2)+
  #scale_y_log10(breaks=seq(75,200,25),limits=c(60,225))+ 
  theme_fivethirtyeight()+
  theme(legend.position=&quot;none&quot;,plot.caption=element_text(hjust=0,size=7),plot.subtitle=element_text(face=&quot;italic&quot;),
        axis.text=element_text(size=7.5))+
  labs(x=&quot;&quot;,y=&quot;&quot;,title=&quot;Real house prices and disposable incomes&quot;,
       caption=&quot;\n@lenkiefer Source: Dallas Federal Reserve International House Price Database: http://www.dallasfed.org/institute/houseprice/&quot;,
       subtitle=&quot;Seasonally adjusted index (1990Q1=100, log scale)&quot;)

# 8:  Panel real hpi and real income 2

ggplot(data=rhpi.dt[year(date)&gt;1989 &amp; country !=&quot;Croatia&quot;], #drop Croatia as it is extreme outlier
       aes(x=date,y=100*rhpi/rhpi.90,color=country,label=country))+
  geom_line(size=1.1,color=fivethirtyeight_pal()(2)[1])+
  scale_x_date(date_breaks=&quot;5 year&quot;, date_labels=&quot;%y&quot;)+
  facet_wrap(~country)+
  geom_line(size=1.1,linetype=2,color=fivethirtyeight_pal()(2)[2],
            data=rpdi.dt[year(date)&gt;1989&amp; country !=&quot;Croatia&quot; ],aes(y=100*rpdi/rpdi.90))  +
  geom_text(data=rhpi.dt[date==max(rhpi.dt$date,na.rm=T) &amp; country %in% c(&quot;Australia&quot;)],
              hjust=1,nudge_x=-30,label=&quot;House Price&quot;,size=3,
              color=fivethirtyeight_pal()(2)[1],fontface=&quot;bold&quot;,aes(y=300))+
  geom_text(data=rpdi.dt[date==max(rpdi.dt$date,na.rm=T) &amp;
                           country %in% c(&quot;Aggregate&quot;)],size=3,
            hjust=1,nudge_x=-30,label=&quot;Income&quot;,aes(y=200),
            color=fivethirtyeight_pal()(2)[2],fontface=&quot;bold&quot;)+
  geom_hline(yintercept=100,linetype=2)+
  scale_y_log10()+
  #scale_y_log10(breaks=seq(75,200,25),limits=c(60,225))+ 
  theme_fivethirtyeight()+
  theme(legend.position=&quot;none&quot;,plot.caption=element_text(hjust=0,size=7),plot.subtitle=element_text(face=&quot;italic&quot;),
        axis.text=element_text(size=7.5))+
  labs(x=&quot;&quot;,y=&quot;&quot;,title=&quot;Real house prices and disposable incomes&quot;,
       caption=&quot;\n@lenkiefer Source: Dallas Federal Reserve International House Price Database: http://www.dallasfed.org/institute/houseprice/&quot;,
       subtitle=&quot;Seasonally adjusted index (1990Q1=100, log scale)&quot;)

# 9:  Panel of house price to income ratio

#merge income and house price data data

dt&lt;-merge(rhpi.dt,rpdi.dt,by=c(&quot;date&quot;,&quot;country&quot;,&quot;cycle&quot;))
dt[,ratio:=(rhpi/rhpi.90)/ (rpdi/rpdi.90)] # create ratio

ggplot(data=dt[year(date)&gt;1989 &amp; country !=&quot;Croatia&quot;], #drop Croatia as it is extreme outlier
       aes(x=date,y=ratio,color=country,label=country))+
  geom_line(size=1.1,color=fivethirtyeight_pal()(2)[1])+
  scale_x_date(date_breaks=&quot;5 year&quot;, date_labels=&quot;%y&quot;)+
  facet_wrap(~country)+
  geom_hline(yintercept=1,linetype=2)+
  theme_fivethirtyeight()+
  theme(legend.position=&quot;none&quot;,plot.caption=element_text(hjust=0,size=7),plot.subtitle=element_text(face=&quot;italic&quot;),
        axis.text=element_text(size=7.5))+
  labs(x=&quot;&quot;,y=&quot;&quot;,title=&quot;Ratio of real house prices to income&quot;,
       caption=&quot;\n@lenkiefer Source: Dallas Federal Reserve International House Price Database: http://www.dallasfed.org/institute/houseprice/&quot;,
       subtitle=&quot;Ratio: 1990Q1 = 100&quot;)

# 10: Another strip chart


ggplot(data=dt[year(date)&gt;1989 &amp; 
                  country %in% c(&quot;US&quot;,&quot;Japan&quot;,&quot;UK&quot;,&quot;France&quot;,&quot;Germany&quot;,&quot;New Zealand&quot;,&quot;S. Korea&quot;,&quot;Spain&quot;,&quot;Ireland&quot;,&quot;Italy&quot;,&quot;Canada&quot;,&quot;Australia&quot;)],
       aes(x=date,y=&quot;&quot;,color=ratio,fill=ratio,label=country))+
  geom_col()+
  scale_fill_viridis(name=&quot;Ratio&quot;,discrete=F,option=&quot;A&quot;)+
  scale_color_viridis(name=&quot;Ratio&quot;,discrete=F,option=&quot;A&quot;)+
  theme_fivethirtyeight()+
  theme(legend.position=&quot;right&quot;,legend.direction=&quot;vertical&quot;)+
  facet_wrap(~country,ncol=2)+
  theme(axis.ticks.y=element_blank(),
        axis.text.y=element_blank(),
        panel.grid.major=element_blank(),
        panel.grid.minor=element_blank(),
        axis.text.x=element_text(size=6))+
  labs(x=&quot;&quot;,y=&quot;&quot;,title=&quot;Ratio of real house prices to real incomes&quot;,
             subtitle=&quot;ratio normalized so 1990Q1 = 100&quot;,
       caption=&quot;\n@lenkiefer Source: Dallas Federal Reserve International House Price Database: http://www.dallasfed.org/institute/houseprice/&quot;)+
  scale_x_date(date_breaks=&quot;5 years&quot;,date_labels=&quot;%Y&quot;)+
  theme(plot.title=element_text(size=14))+
  theme(axis.text.x  =element_text(size=9))+
  theme(plot.subtitle  =element_text(face=&quot;italic&quot;,size=11))+
  theme(plot.caption=element_text(hjust=0,size=7))


# 11: animated gif

dlist&lt;-unique(hpi.dt$date) #get dates 2005 starts in 121

# make function to plot time series for sected countries:
hpi.plot&lt;-function(i){
  ggplot(data=hpi.dt[year(date)&gt;2004 &amp; 
                       date&lt;=dlist[i] &amp;
                       country %in% c(&quot;US&quot;,&quot;Canada&quot;,&quot;Australia&quot;,&quot;New Zealand&quot;,&quot;UK&quot;)],
         aes(x=date,y=hpi,color=country,linetype=country,label=country))+
    geom_line(size=1.1)+
    scale_x_date(breaks=seq(dlist[121],dlist[166]+years(1),&quot;1 year&quot;),
                 date_labels=&quot;%Y&quot;,limits=c(dlist[121],dlist[166]+years(1)))+
    geom_text(data=hpi.dt[date==dlist[i] &amp;
                            country %in% c(&quot;US&quot;,&quot;Canada&quot;,&quot;Australia&quot;,&quot;New Zealand&quot;,&quot;UK&quot;)],
              hjust=0,nudge_x=30)+
    theme_minimal()+ geom_hline(yintercept=100,linetype=2)+
    scale_y_log10(breaks=seq(75,200,25),limits=c(75,200))+ theme_fivethirtyeight()+
    theme(legend.position=&quot;none&quot;,plot.caption=element_text(hjust=0),plot.subtitle=element_text(face=&quot;italic&quot;))+
    labs(x=&quot;&quot;,y=&quot;&quot;,title=&quot;Comparing house prices&quot;,
         caption=&quot;\n@lenkiefer Source: Dallas Federal Reserve International House Price Database: http://www.dallasfed.org/institute/houseprice/&quot;,
         subtitle=&quot;Seasonally adjusted index (2005=100, log scale)&quot;)
}
  
library(animation)
oopt = ani.options(interval = 0.15)
saveGIF({for (i in 121:166) {
  g&lt;-hpi.plot(i)
   
  print(g)
 print(i)
  ani.pause()
}
  
  for (i2 in 1:20) {
    print(g)
    ani.pause()
  }
},movie.name=&quot;hpi compare international.gif&quot;,ani.width = 750, ani.height = 400)</code></pre>
</div>


  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="http://lenkiefer.com/2016/12/08/10-ways-to-visualize-mortgage-rates/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="http://lenkiefer.com/2016/12/08/10-ways-to-visualize-mortgage-rates/">10 ways to visualize mortgage rates </a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="http://lenkiefer.com/2016/12/12/ribbon-rate-chart/">Ribbon rate chart </a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="http://lenkiefer.com/2016/12/12/ribbon-rate-chart/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>



  

</div>
<footer class="post-footer clearfix">
    

    <div class="share">
        
            <a class="icon-twitter" href="https://twitter.com/share?url=http://lenkiefer.comhttp%3a%2f%2flenkiefer.com%2f2016%2f12%2f10%2fglobal-house-price-trends%2f&text=Global%20house%20price%20trends%20 via %40lenkiefer"
                onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                <i class="fa fa-twitter"></i>
                <span class="hidden">Twitter</span>
            </a>
        

        
            <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://lenkiefer.comhttp%3a%2f%2flenkiefer.com%2f2016%2f12%2f10%2fglobal-house-price-trends%2f"
                onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                <i class="fa fa-facebook"></i>
                <span class="hidden">Facebook</span>
            </a>
        


        
    </div>
</footer>
</div>
</div>
<script src="http://lenkiefer.com/js/ui.js"></script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66905937-1', 'auto');
  ga('send', 'pageview');

</script>






</body>
</html>

