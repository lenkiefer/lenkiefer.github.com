<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="So bad it might be good">
  <meta name="generator" content="Hugo 0.81.0" />

  <title>Taste the painbow &middot; Len Kiefer</title>

    

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="http://lenkiefer.com/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="http://lenkiefer.com/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="http://lenkiefer.com/css/blackburn.css">

  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">

  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet" type="text/css">

  
  <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

 
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/androidstudio.min.css">
  <script async src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/highlight.min.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="http://lenkiefer.com/img/favicon.ico" type="image/x-icon" />

  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="http://lenkiefer.com/">Len Kiefer</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="http://lenkiefer.com/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="http://lenkiefer.com/post/"><i class='fa fa-list fa-fw'></i>Archive</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="http://lenkiefer.com/about/"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/@lenkiefer" rel="me" target="_blank"><i class="fab fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/leonard-kiefer-51175331" rel="me" target="_blank"><i class="fab fa-linkedin fa-fw"></i>LinkedIn</a>
    </li>
    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/lenkiefer" rel="me" target="_blank"><i class="fab fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2021. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


       <meta name="twitter:card" content="summary_large_image">
       <meta name="twitter:image" content="http://lenkiefer.com//img/charts_2021_10_11/painbow.png" >
     
    <meta property="og:title" content="Taste the painbow">
    <meta property="og:description" content="So bad it might be good">

<div class="header">
  <h1>Taste the painbow</h1>
  <h2>So bad it might be good</h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>2021/11/04</time>
  </div>

  

  

  
  
  
  <div>
    <i class="fa fa-tags fa-fw"></i>
    
      <a class="post-taxonomy-tag" href="http://lenkiefer.com/tags/house-prices">house prices</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="http://lenkiefer.com/tags/r">R</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="http://lenkiefer.com/tags/housing">housing</a>
    
  </div>
  
  

</div>

  
<script src="http://lenkiefer.com/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<p>As a mental exercise, each week I make a new chart using same data, mortgage rates.</p>
<p>Sometimes I try to make something awesome, other times to stretch the imagination I try to make the most awful chart possible. You can learn a lot from that, but I’ll never tell you which is which!</p>
<p>Making an awful chart is an art unto itself. Sure you could fire up your favorite software and just take the defaults, odds are they would be reasonably awful though defaults are generally less awful these days.</p>
<p>But to really take awfulness to the next level you have to hit that uncanny valley between a good chart, and the true Eldritch horror chart.</p>
<p>Using <a href="https://gist.github.com/steveharoz/918b5f0f7b7f13a6cb6bfbaf8031985b">R code posted by Steve Haroz</a>, I used the <a href="https://xkcd.com/2537/">XKCD inspired Painbow</a> color scheme to create this monstrosity. Though Steve makes some good points suggesting maybe this color scheme could be useful, see this <a href="https://twitter.com/sharoz/status/1456190337614032896?s=20">twitter thread</a>. In this case, I’ll tip my hand. I don’t think my chart is very good. In fact, it is pretty clearly evil.</p>
<p>Behold, the Painbow!</p>
<p><img src="http://lenkiefer.com/post/2021-11-04-taste-the-painbow_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<pre class="r"><code>library(data.table)
library(tidyverse)
# Steve Haroz&#39;s estimate of the XKCD colormap 
xkcd = tribble(
  ~color, ~value,
  &quot;#E7E8E1&quot;, 120,
  &quot;#C6F26B&quot;, 110,
  &quot;#66E240&quot;, 100,
  &quot;#11C51E&quot;, 90,
  &quot;#7E5905&quot;, 70,
  &quot;#FD0000&quot;, 45,
  &quot;#037D47&quot;, 40,
  &quot;#1C2856&quot;, 30,
  &quot;black&quot;, 20,
  &quot;white&quot;, 0
) %&gt;% 
  mutate(value = value/max(value))

# get data
df &lt;- fread(&quot;http://www.freddiemac.com/pmms/docs/PMMS_history.csv&quot;) 
df$date &lt;- as.Date(df$date,format=&quot;%m/%d/%Y&quot;)
mydate &lt;- format(max(df$date),&quot;%B %d, %Y&quot;)
df &lt;- unique(df)

# unleash the pain
gpain &lt;- 
ggplot(data=filter(df,year(date)&gt;2009), aes(x=date,y=pmms30,fill=pmms30))+geom_col()+
  scale_fill_gradientn(name=&quot;US weekly avg 30-yr FRM (p.p) &quot;,colors=xkcd$color, values=xkcd$value)+
  theme_minimal()+
  theme(legend.position=&quot;top&quot;,
        legend.key.width=unit(2,&quot;cm&quot;),
        plot.caption=element_text(hjust=0),
        axis.text=element_text(size=rel(2)),
        plot.background = element_rect(fill=&quot;white&quot;,color=NA),
        panel.background = element_rect(fill=&quot;white&quot;,color=NA),
        plot.subtitle=element_text(face=&quot;italic&quot;,size=rel(1.5)),
        plot.title=element_text(size=rel(2),face=&quot;bold&quot;))+
  labs(x=&quot;date (weekly)&quot;,
       y=&quot;&quot;,
       title=&quot;Mortgage rates, taste the Painbow&quot;,
       caption=paste0(&quot;@lenkiefer | Source: Freddie Mac Primary Mortgage Market Survey through &quot;,mydate,
       &quot;\nBased on XKCD comic https://xkcd.com/2537/, \ncolor palette from @sharoz https://gist.github.com/steveharoz/918b5f0f7b7f13a6cb6bfbaf8031985b&quot;))
  
gpain</code></pre>

  
  <h4><i class="fas fa-share-alt" aria-hidden="true"></i>&nbsp;Share!</h4>
<ul class="share-buttons">
	<li><a href="https://twitter.com/intent/tweet?url=http%3a%2f%2flenkiefer.com%2f2021%2f11%2f04%2f2021-11-04-taste-the-painbow%2f" target="_blank" title="Tweet"><i class="fab fa-twitter" aria-hidden="true"></i><span class="sr-only">Tweet</span></a>
	</li>
</ul>


<style>
	ul.share-buttons{
	  list-style: none;
	  padding: 0;
	}

	ul.share-buttons li{
	  display: inline;
	}

	ul.share-buttons .sr-only{
	  position: absolute;
	  clip: rect(1px 1px 1px 1px);
	  clip: rect(1px, 1px, 1px, 1px);
	  padding: 0;
	  border: 0;
	  height: 1px;
	  width: 1px;
	  overflow: hidden;
	}
</style>


  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="http://lenkiefer.com/2021/10/11/2021-10-11-house-price-deceleration/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="http://lenkiefer.com/2021/10/11/2021-10-11-house-price-deceleration/">House price deceleration</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
  </div>
</div>


  
  
  
  

  

</div>

</div>
</div>
<script src="http://lenkiefer.com/js/ui.js"></script>
<script src="http://lenkiefer.com/js/menus.js"></script>




<script>
  
  if (window.location.hostname != "localhost") {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-66905937-1', 'auto');
    ga('send', 'pageview');
  }
</script>





<script src="http://lenkiefer.com/js/math-code.js"></script>
  <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
  


</body>
</html>

