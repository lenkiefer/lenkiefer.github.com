<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.81.0" />

  <title>Hello Hugo! Hello Blogdown! &middot; Len Kiefer</title>

    

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="http://lenkiefer.com/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="http://lenkiefer.com/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="http://lenkiefer.com/css/blackburn.css">

  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">

  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet" type="text/css">

  
  <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

 
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/androidstudio.min.css">
  <script async src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/highlight.min.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="http://lenkiefer.com/img/favicon.ico" type="image/x-icon" />

  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="http://lenkiefer.com/">Len Kiefer</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="http://lenkiefer.com/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="http://lenkiefer.com/post/"><i class='fa fa-list fa-fw'></i>Archive</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="http://lenkiefer.com/about/"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/@lenkiefer" rel="me" target="_blank"><i class="fab fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/leonard-kiefer-51175331" rel="me" target="_blank"><i class="fab fa-linkedin fa-fw"></i>LinkedIn</a>
    </li>
    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/lenkiefer" rel="me" target="_blank"><i class="fab fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2021. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


       <meta name="twitter:card" content="summary">
       <meta name="twitter:image" content="http://lenkiefer.com/img/logo/logo.png" >
    
    <meta property="og:title" content="Hello Hugo! Hello Blogdown!">
    <meta property="og:description" content="ALL RIGHT! LOOKS LIKE WE’RE BACK ONLINE.
I took the opportunity to try out the newly released blogdown R package and migrate my blog over from Jekyll to Hugo.
This blog has been up for just over two years and Jekyll was working fine, but I never felt really comfortable. I’m guessing that the Blogdown package will become enormously popular and it seems that Hugo has more flexibility for me.">

<div class="header">
  <h1>Hello Hugo! Hello Blogdown!</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>2017/09/16</time>
  </div>

  

  

  
  
  
  <div>
    <i class="fa fa-tags fa-fw"></i>
    
      <a class="post-taxonomy-tag" href="http://lenkiefer.com/tags/meta">meta</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="http://lenkiefer.com/tags/personal">personal</a>
    
  </div>
  
  

</div>

  


<p>ALL RIGHT! LOOKS LIKE WE’RE BACK ONLINE.</p>
<p>I took the opportunity to try out the <a href="https://blog.rstudio.com/2017/09/11/announcing-blogdown/">newly released</a> <a href="https://github.com/rstudio/blogdown">blogdown</a> <a href="https://www.r-project.org/">R</a> package and migrate my blog over from <a href="https://jekyllrb.com/">Jekyll</a> to <a href="https://gohugo.io/">Hugo</a>.</p>
<p>This blog has been up for just over two years and Jekyll was working fine, but I never felt really comfortable. I’m guessing that the Blogdown package will become enormously popular and it seems that Hugo has more flexibility for me. Also, Blogdown and <a href="https://www.rstudio.com/products/rstudio/">Rstudio</a> integrate better with Hugo than Jekyll.</p>
<div id="and-we-got-a-fancy-new-theme" class="section level1">
<h1>And we got a fancy new theme</h1>
<p>By far the best part of migrating was picking out a fancy new theme for this space. There’s quite a lot of different <a href="https://themes.gohugo.io/">themes available</a> for Hugo, though not all of them play nice with Blogdown.</p>
<p>After trying several out, I decided that <a href="https://themes.gohugo.io/ghostwriter/">Ghostwriter</a> would be a nice simple theme for this space. It’s pretty close to my old theme, especially after I tweaked it.</p>
<p>In addition to shifting the main color from red to royal blue, I also took the opportunity to make <a href="https://www.wired.com/2016/10/how-the-web-became-unreadable/">the page more readable</a> by changing the font from gray to black. I just had to dig into the Ghostwriter .css file and switch out the colors (in several places).</p>
</div>
<div id="migration" class="section level1">
<h1>Migration</h1>
<p>Migration wasn’t too hard. My original site wasn’t too complicated, though I did have a lot of images. The biggest challenge was broken links and redirecting image sources. Fortunately, I picked up some regular expressions and code snippets from the <a href="https://bookdown.org/yihui/blogdown/">Blogdown book</a> that made it easy. I also decided to add tags and categories to my posts which is hard to do ex post and consumed a fair amount of time.</p>
<p>Also, getting the links and images to work took some time. Gave me the motivation to learn some regular expressions. Here’s a flavor of what I had to do.</p>
<div id="fixing-links-with-regular-expressions" class="section level2">
<h2>Fixing links with regular expressions</h2>
<p>My markdown code under Jekyll referenced links in the following manner:</p>
<p><code>[awesome link]({% post_url 2017-08-07-house-price-trends %})</code></p>
<p>which would become</p>
<p><code>&lt;a href=&quot;/2017/08/07/house-price-trends&quot;&gt;</code></p>
<p>when Jekyll built my site.</p>
<p>In order to get the links to work for Blogdown and Hugo (assuming I got the Post URLs to remain the same) I needed the markdown to look like:</p>
<p><code>[awesome link](../../../../2017/08/07/house-price-trends )</code></p>
<p>The <code>../</code> business probably isn’t necessary but it worked. You see under my new setup posts are stored under <code>lenkiefer.com/YYYY/MM/DD/slug</code> where <code>YYYY</code> is year, <code>MM</code> is month, <code>DD</code> is date and <code>slug</code> is the post slug (which I based on the original markdown file names).</p>
<p>In order to get this to work I modified a bit of code from the super-helpful <a href="https://bookdown.org/yihui/blogdown/">Blogdown book</a>. I created it piecemeal through trial and error so it probably could be condensed. But here’s what I had:</p>
<pre class="r"><code>################################################################################
## Get a list of markdown files (or sub in Rmd for Rmarkdown files) ##
################################################################################

files = list.files(
  &#39;content/&#39;, &#39;[.](md)$&#39;, full.names = TRUE,
  recursive = TRUE
)


################################################################################
## Drop post &quot;{% post_url &quot;##
################################################################################

for( f in files ){
  x &lt;- readLines(f)
  y &lt;- gsub( &#39;\\{% post_url &#39;, &quot;../&quot;, x )
  cat(y, file=f, sep=&quot;\n&quot;)  }

################################################################################
## Drop &quot;%}&quot;&quot; ##
################################################################################

for( f in files ){
  x &lt;- readLines(f)
  y &lt;- gsub( &quot;\\%}&quot;, &quot;&quot;, x )
  cat(y, file=f, sep=&quot;\n&quot;) }

################################################################################
## Replace  &quot;YYYY-MM-DD-&quot; with &quot;../../../../YYYY/MM/DD/&quot;&quot;
## e.g. :&quot;2017-08-07-&quot; with ../../../../2017/08/07/
################################################################################

for( f in files ){
  x &lt;- readLines(f)
  y &lt;- gsub( &#39;(..\\/)(\\d{4})(-)(\\d{2})(-)(\\d{2})(-)&#39;, 
             &#39;..\\/..\\/..\\/..\\/\\2\\/\\4\\/\\6\\/&#39;, x )
  cat(y, file=f, sep=&quot;\n&quot;) }</code></pre>
<p>Not the most elegant solution, but running this code over both markdown and Rmarkdown files got my links to work. I also needed to do something similar to get image sources (like my many gifs) to work.</p>
<div id="images" class="section level3">
<h3>images</h3>
<p>I also needed to do something similar to get image sources (like my many gifs) to work. For my setup I needed to replace <code>{{site.url}}</code> with <code>../../../..</code>. This little bit handled it.</p>
<pre class="r"><code>################################################################################
## {{ site.url}} with &quot;../../../..&quot;
################################################################################

for( f in files ){
  x &lt;- readLines(f)
  y &lt;- gsub( &#39;\\{\\{ site.url\\}\\}&#39;, &quot;../../../..&quot;, x )
  cat(y, file=f, sep=&quot;\n&quot;)}</code></pre>
<p>Then I copied over my image files from the Jekyll blog and stored them in the <code>\static\img</code> folder in my new Hugo blog.</p>
</div>
</div>
<div id="recompile-and-go" class="section level2">
<h2>Recompile and go</h2>
<p>The last thing was to re-run my Rmarkdown code and rebuild the site. The Rmarkdown code mostly ran well, but I had to go back and reload some libraries I hadn’t reinstalled when updated R.</p>
<p>The final step was to all the stuff in my new blog and save it under my old blog directory (after I archived the old blog). Then I was good to go and here we are.</p>
<p>Be sure to check out my new <a href="../../../../tag/">post tags</a> which should help you find posts based on topic. I’ve also added a <a href="../../../../project/">projects</a> page that I’ll be adding longer pieces to from time to time.</p>
</div>
</div>

  
  <h4><i class="fas fa-share-alt" aria-hidden="true"></i>&nbsp;Share!</h4>
<ul class="share-buttons">
	<li><a href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2flenkiefer.com%2f2017%2f09%2f16%2fhello-hugo-hello-blogdown%2f" target="_blank" title="Share on Facebook"><i class="fab fa-facebook" aria-hidden="true"></i><span class="sr-only">Share on Facebook</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="https://twitter.com/intent/tweet?source=http%3a%2f%2flenkiefer.com%2f2017%2f09%2f16%2fhello-hugo-hello-blogdown%2f" target="_blank" title="Tweet"><i class="fab fa-twitter" aria-hidden="true"></i><span class="sr-only">Tweet</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="https://plus.google.com/share?url=http%3a%2f%2flenkiefer.com%2f2017%2f09%2f16%2fhello-hugo-hello-blogdown%2f" target="_blank" title="Share on Google+"><i class="fab fa-google-plus" aria-hidden="true"></i><span class="sr-only">Share on Google+</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="http://www.tumblr.com/share?v=3&u=http%3a%2f%2flenkiefer.com%2f2017%2f09%2f16%2fhello-hugo-hello-blogdown%2f" target="_blank" title="Post to Tumblr"><i class="fab fa-tumblr" aria-hidden="true"></i><span class="sr-only">Post to Tumblr</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="http://pinterest.com/pin/create/button/?url=http%3a%2f%2flenkiefer.com%2f2017%2f09%2f16%2fhello-hugo-hello-blogdown%2f" target="_blank" title="Pin it"><i class="fab fa-pinterest-p" aria-hidden="true"></i><span class="sr-only">Pin it</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="http://www.reddit.com/submit?url=http%3a%2f%2flenkiefer.com%2f2017%2f09%2f16%2fhello-hugo-hello-blogdown%2f" target="_blank" title="Submit to Reddit"><i class="fab fa-reddit-alien" aria-hidden="true"></i><span class="sr-only">Submit to Reddit</span></a>
	</li>
</ul>


<style>
	ul.share-buttons{
	  list-style: none;
	  padding: 0;
	}

	ul.share-buttons li{
	  display: inline;
	}

	ul.share-buttons .sr-only{
	  position: absolute;
	  clip: rect(1px 1px 1px 1px);
	  clip: rect(1px, 1px, 1px, 1px);
	  padding: 0;
	  border: 0;
	  height: 1px;
	  width: 1px;
	  overflow: hidden;
	}
</style>


  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="http://lenkiefer.com/2017/08/29/low-key/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="http://lenkiefer.com/2017/08/29/low-key/">Low-key dataviz</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="http://lenkiefer.com/2017/09/17/housing-vacancy-trends/">If housing inventory is so tight, why are so many homes vacant?</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="http://lenkiefer.com/2017/09/17/housing-vacancy-trends/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>


  
  
  
  

  

</div>

</div>
</div>
<script src="http://lenkiefer.com/js/ui.js"></script>
<script src="http://lenkiefer.com/js/menus.js"></script>




<script>
  
  if (window.location.hostname != "localhost") {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-66905937-1', 'auto');
    ga('send', 'pageview');
  }
</script>





<script src="http://lenkiefer.com/js/math-code.js"></script>
  <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
  


</body>
</html>

