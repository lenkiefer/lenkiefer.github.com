<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="U.S. housing starts have been trending higher, but remain super-low when compared to historical averages. Let&#39;s take a look">

<meta name="generator" content="Hugo 0.81.0">

  <title>U.S. housing starts are still super low &middot; Len Kiefer</title>

  
  
  <link rel="stylesheet" href="https://cdn.bootcss.com/pure/0.6.2/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdn.bootcss.com/pure/0.6.2/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdn.bootcss.com/pure/0.6.2/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="/css/blackburn.css">

  
  <script async src="https://use.fontawesome.com/32c3d13def.js"></script>

  
  

  
  <link rel="stylesheet" href="//cdn.bootcss.com/highlight.js/9.11.0/styles/androidstudio.min.css">
  <script src="//cdn.bootcss.com/highlight.js/9.11.0/highlight.min.js"></script>
  <script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/r.min.js"></script>
  <script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="http://lenkiefer.com/img/favicon.PNG" type="image/x-icon" />

  
  

</head>

<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="/">Len Kiefer</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/post/"><i class='fa fa-list fa-fw'></i>Archive</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/about/"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/@lenkiefer" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/leonard-kiefer-51175331" target="_blank"><i class="fa fa-linkedin-square fa-fw"></i>LinkedIn</a>
    </li>
    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/lenkiefer" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2015-2018. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


       <meta name="twitter:card" content="summary_large_image">
       <meta name="twitter:image" content="http://lenkiefer.com//img/charts_jul_18_2018/starts.png" >
     
    <meta property="og:title" content="U.S. housing starts are still super low">
    <meta property="og:description" content="U.S. housing starts have been trending higher, but remain super-low when compared to historical averages. Let&#39;s take a look">

<div class="header">
  <h1>U.S. housing starts are still super low</h1>
  <h2>U.S. housing starts have been trending higher, but remain super-low when compared to historical averages. Let&#39;s take a look</h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>2018/07/18</time>
  </div>

  

  

  
  
  
  <div>
    <i class="fa fa-tags fa-fw"></i>
    
      <a class="post-taxonomy-tag" href="http://lenkiefer.com/tags/r">R</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="http://lenkiefer.com/tags/data">data</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="http://lenkiefer.com/tags/housing">housing</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="http://lenkiefer.com/tags/animation">animation</a>
    
  </div>
  
  

</div>

  


<p>I try not to use too much jargon (jargon monoxide can be deadly) on this blog. But I’ve got a bit of a technical term I’ve been using the describe U.S. residential construction: super-low.</p>
<p>To be sure, housing construction has been grinding higher, but it’s been taking a while for activity to get back close to historical averages. Once you account for the larger population, which all else equal needs more housing units, the level of construction is quite low.</p>
<p>Take a look at this movie:</p>
<p><img src="../../../../img/charts_jul_18_2018/starts_v2_july_2018.gif"></p>
<p><a href="https://www.r-project.org/">R</a> code for this graph is below. This post combines techniques described in more detail <a href="../../../../2018/05/21/pomological-plots/">in this post</a> on mortgage rates and <a href="../../../../2017/09/25/charting-housing-starts/">this post on housing starts</a>. And yes, some of the images in that last post have been lost due to my recent blog makeover. Good news though, the code still works.</p>
<div id="get-data" class="section level1">
<h1>Get data</h1>
<pre class="r"><code>#####################################################################################
## Step 0: Load Libraries ----
#####################################################################################
library(tidyverse)
library(cowplot)
library(lubridate)
library(scales)
library(ggridges)  # replaces ggjoy
library(extrafont)

#####################################################################################
## Step 1: Prepare for data  ----
#####################################################################################

tickers=data.frame(# variable symbols/mnemonics
  symbol = c(&quot;HOUST&quot;,
             &quot;HOUST1F&quot;,
             &quot;HOUST5F&quot;),
  # variable names
  varname = c(&quot;Total housing starts&quot;,
              &quot;1 unit housing starts&quot;,
              &quot;5+ unit housing starts&quot;)) %&gt;%
  map_if(is.factor,as.character) %&gt;% # strings as characters
  as.tibble()                        # make a tibble



#####################################################################################
## Step 2: Pull data  ----
#####################################################################################

tickers$symbol %&gt;% tidyquant::tq_get(get=&quot;economic.data&quot;, from=&quot;1960-01-01&quot;) -&gt; df

#####################################################################################
## Step 3: Organize data  ----
#####################################################################################

df&lt;-merge(df,tickers,by=&quot;symbol&quot;)
df %&gt;% mutate( year=year(date),
               month=month(date),
               mname=forcats::fct_reorder(as.character(date, format=&quot;%b&quot;),month)) %&gt;%
  group_by(year,symbol) %&gt;% 
  arrange(date,symbol) %&gt;% 
  mutate(cs = cumsum(price)) %&gt;%
  ungroup() -&gt; df

df3 &lt;- df %&gt;% select(symbol,date,price) %&gt;% spread(symbol,price) %&gt;% 
  mutate(yearf=factor(year(date)),year=year(date),decade=paste0(10*floor(year/10),&quot;&#39;s&quot;))

# list of dates
dlist&lt;- unique(df$date)
# number of dates
N &lt;- length(dlist)

## Step 4: function for plot  ----

# Define custom color scales ----


## Make Color Scale ----  ##

my_colors &lt;- c(
  &quot;green&quot;      = rgb(103,180,75, maxColorValue = 256),
  &quot;green2&quot;      = rgb(147,198,44, maxColorValue = 256),
  &quot;lightblue&quot;  =  rgb(9, 177,240, maxColorValue = 256),
  &quot;lightblue2&quot; = rgb(173,216,230, maxColorValue = 256),
  &#39;blue&#39;       = &quot;#00aedb&quot;,
  &#39;red&#39;        = &quot;#d11141&quot;,
  &#39;orange&#39;     = &quot;#f37735&quot;,
  &#39;yellow&#39;     = &quot;#ffc425&quot;,
  &#39;gold&#39;       = &quot;#FFD700&quot;,
  &#39;light grey&#39; = &quot;#cccccc&quot;,
  &#39;purple&#39;     = &quot;#551A8B&quot;,
  &#39;dark grey&#39;  = &quot;#8c8c8c&quot;)


my_cols &lt;- function(...) {
  cols &lt;- c(...)
  if (is.null(cols))
    return (my_colors)
  my_colors[cols]
}


my_palettes &lt;- list(
  `main`  = my_cols(&quot;blue&quot;, &quot;green&quot;, &quot;yellow&quot;),
  `cool`  = my_cols(&quot;blue&quot;, &quot;green&quot;),
  `hot`   = my_cols(&quot;yellow&quot;, &quot;orange&quot;, &quot;red&quot;),
  `mixed` = my_cols(&quot;lightblue&quot;, &quot;green&quot;, &quot;yellow&quot;, &quot;orange&quot;, &quot;red&quot;),
  `mixed2` = my_cols(&quot;lightblue2&quot;,&quot;lightblue&quot;, &quot;green&quot;, &quot;green2&quot;,&quot;yellow&quot;,&quot;gold&quot;, &quot;orange&quot;, &quot;red&quot;),
  `mixed3` = my_cols(&quot;lightblue2&quot;,&quot;lightblue&quot;, &quot;green&quot;, &quot;yellow&quot;,&quot;gold&quot;, &quot;orange&quot;, &quot;red&quot;),
  `mixed4` = my_cols(&quot;lightblue2&quot;,&quot;lightblue&quot;, &quot;green&quot;, &quot;green2&quot;,&quot;yellow&quot;,&quot;gold&quot;, &quot;orange&quot;, &quot;red&quot;,&quot;purple&quot;),
  `mixed5` = my_cols(&quot;lightblue&quot;,&quot;green&quot;, &quot;green2&quot;,&quot;yellow&quot;,&quot;gold&quot;, &quot;orange&quot;, &quot;red&quot;,&quot;purple&quot;,&quot;blue&quot;),
  `mixed6` = my_cols(&quot;green&quot;, &quot;gold&quot;, &quot;orange&quot;, &quot;red&quot;,&quot;purple&quot;,&quot;blue&quot;),
  `grey`  = my_cols(&quot;light grey&quot;, &quot;dark grey&quot;)
)


my_pal &lt;- function(palette = &quot;main&quot;, reverse = FALSE, ...) {
  pal &lt;- my_palettes[[palette]]
  
  if (reverse) pal &lt;- rev(pal)
  
  colorRampPalette(pal, ...)
}


scale_color_mycol &lt;- function(palette = &quot;main&quot;, discrete = TRUE, reverse = FALSE, ...) {
  pal &lt;- my_pal(palette = palette, reverse = reverse)
  
  if (discrete) {
    discrete_scale(&quot;colour&quot;, paste0(&quot;my_&quot;, palette), palette = pal, ...)
  } else {
    scale_color_gradientn(colours = pal(256), ...)
  }
}



scale_fill_mycol &lt;- function(palette = &quot;main&quot;, discrete = TRUE, reverse = FALSE, ...) {
  pal &lt;- my_pal(palette = palette, reverse = reverse)
  
  if (discrete) {
    discrete_scale(&quot;fill&quot;, paste0(&quot;my_&quot;, palette), palette = pal, ...)
  } else {
    scale_fill_gradientn(colours = pal(256), ...)
  }
}

myf &lt;- function(i=N,var=HOUST, my.ylab=NULL){
  var &lt;-  enquo(var)
  
  if(missing(my.ylab)) {my.ylab=var} 
  
  myr0 &lt;- function(x, a=0.02){
    geom_ribbon(alpha=a, color=NA, aes(ymin=0,ymax=min(x, !!var )))    
  }
  
  myr &lt;- function(x, a=0.02){
    geom_ribbon(alpha=a, color=NA, aes(ymin=min(x, !!var )))    
  }
  
  ggplot(data=filter(df3, date&lt;=dlist[i]) ,
         aes(x=date,y=!!var, ymax= !! var , fill=decade,color=decade))+
    geom_line(data=df3, alpha=0)+
    geom_ribbon(alpha=0.5, color=NA, aes(ymin=last(!!var)))+
    map(c(0,pull(df3,!!var) %&gt;% min()) %&gt;% pretty(10), myr0, a=0.005)+
    map(c(0,pull(df3,!!var) %&gt;% last()) %&gt;% pretty(10), myr, a=0.025)+
    guides(color=FALSE)+
    geom_hline(aes(yintercept=last(!!var)), linetype=2)+
    geom_line(size=0.85)+
    scale_color_mycol(&quot;mixed5&quot;)+
    scale_fill_mycol(&quot;mixed5&quot;)+
    theme_ridges(font_family=&quot;Roboto&quot;)+
    theme(legend.position=&quot;none&quot;, 
          plot.caption=element_text(size=8, hjust=0))+
    scale_x_date(limits=as.Date(c(&quot;1960-01-01&quot;,&quot;2018-07-15&quot;)),date_breaks=&quot;10 year&quot;,date_labels=&quot;%Y&quot;,expand=c(0,0))+
    labs(x=&quot;&quot;,y=&quot;Housing Starts: 1000s SAAR&quot;,
         subtitle=paste0(&quot;Dotted line at last observation for &quot;,as.character(dlist[i],format=&quot;%B, %Y&quot;)),
         title=&quot;U.S. Monthly Housing Starts (1000s, SAAR)&quot;,
         caption=&quot;@lenkiefer Source: U.S. Census Bureau and Department of Housing and Urban Development\n&quot;)

}

## Step 5: Make Plot  ----
print(myf(N))</code></pre>
<p><img src="/post/2018-07-18-u-s-housing-starts-are-still-super-low_files/figure-html/07-18-2018-setup-1-1.png" width="672" /></p>
<div id="animate-it" class="section level2">
<h2>Animate it</h2>
<p>To animate it run:</p>
<pre class="r"><code>mydir &lt;- path.to.your.directory  #change this

library(animation)
oopt&lt;-ani.options(interval=1/20)
suppressMessages(
  saveGIF({for (i in seq(3,N,3)){  
    g&lt;- myf2(i)
    print(g)
    print(paste(i,&quot;out of&quot;,N))
    ani.pause()
  }
    for (ii in 1:15){
      print(g)
      ani.pause()
      print(paste(ii,&quot;out of&quot;,15))
    }
  }, movie.name = paste0(mydir,&quot;starts.gif&quot;),  ani.width=620, ani.height=400) 
)</code></pre>
</div>
<div id="make-some-other-plots" class="section level2">
<h2>Make some other plots</h2>
<p>While we have all that data we downloaded from <a href="https://fred.stlouisfed.org/">FRED</a> let’s use it. Out plotting function comes in handy now.</p>
<pre class="r"><code>myf(N, var=HOUST1F)+labs(y=&quot;1-unit Housing Starts: 1000s SAAR&quot;, title=&quot;U.S. Monthly 1-unit Housing Starts (1000s, SAAR)&quot;)</code></pre>
<p><img src="/post/2018-07-18-u-s-housing-starts-are-still-super-low_files/figure-html/07-18-2018-plot-2-1.png" width="672" /></p>
<pre class="r"><code>myf(N, var=HOUST5F)+labs(y=&quot;5+-unit Housing Starts: 1000s SAAR&quot;, title=&quot;U.S. Monthly 5+ unit Housing Starts (1000s, SAAR)&quot;)</code></pre>
<p><img src="/post/2018-07-18-u-s-housing-starts-are-still-super-low_files/figure-html/07-18-2018-plot-2-2.png" width="672" /></p>
</div>
</div>


  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="http://lenkiefer.com/2018/07/17/how-bad-is-a-linear-probability-model/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="http://lenkiefer.com/2018/07/17/how-bad-is-a-linear-probability-model/">How bad is a Linear Probability Model?</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="http://lenkiefer.com/2018/07/21/maybe-the-linear-probability-model-isn-t-all-bad/">Maybe the Linear Probability Model isn&#39;t all bad</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="http://lenkiefer.com/2018/07/21/maybe-the-linear-probability-model-isn-t-all-bad/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>



  

</div>
<footer class="post-footer clearfix">
    
        <p class="post-tags">
            <span>Tagged:</span>
            
            
                <a href="/tags/r/">R</a>, 
            
                <a href="/tags/data/">data</a>, 
            
                <a href="/tags/housing/">housing</a>, 
            
                <a href="/tags/animation/">animation</a>
            
        </p>
    

    <div class="share">
        
            <a class="icon-twitter" href="https://twitter.com/share?url=http://lenkiefer.comhttp%3a%2f%2flenkiefer.com%2f2018%2f07%2f18%2fu-s-housing-starts-are-still-super-low%2f&text=U.S.%20housing%20starts%20are%20still%20super%20low via %40lenkiefer"
                onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                <i class="fa fa-twitter"></i>
                <span class="hidden">Twitter</span>
            </a>
        

        
            <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://lenkiefer.comhttp%3a%2f%2flenkiefer.com%2f2018%2f07%2f18%2fu-s-housing-starts-are-still-super-low%2f"
                onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                <i class="fa fa-facebook"></i>
                <span class="hidden">Facebook</span>
            </a>
        


        
    </div>
</footer>
</div>
</div>
<script src="http://lenkiefer.com/js/ui.js"></script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66905937-1', 'auto');
  ga('send', 'pageview');

</script>






</body>
</html>

